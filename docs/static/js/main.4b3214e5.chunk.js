(this.webpackJsonpbandnames=this.webpackJsonpbandnames||[]).push([[0],{39:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(32),a=n.n(r),s=(n(39),n(8)),o=n(33),i=n.n(o),b=n(0),j=Object(c.createContext)(),d=function(e){var t=e.children,n=function(e){var t=Object(c.useMemo)((function(){return i.a.connect(e,{transports:["websocket"]})}),[e]),n=Object(c.useState)(!1),r=Object(s.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){o(t.connected)}),[t]),Object(c.useEffect)((function(){t.on("connect",(function(){o(!0)}))}),[t]),Object(c.useEffect)((function(){t.on("disconnect",(function(){o(!1)}))}),[t]),{socket:t,online:a}}("https://bandnamesbackserver.herokuapp.com/"),r=n.socket,a=n.online;return Object(b.jsx)(j.Provider,{value:{socket:r,online:a},children:t})},l=function(){var e=Object(c.useContext)(j).socket,t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Agregar Banda"}),Object(b.jsx)("form",{action:"",onSubmit:function(t){var n;t.preventDefault(),r.length>=0&&(n=r,e.emit("crear-banda",{nombre:n})),a("")},children:Object(b.jsx)("input",{className:"form-control",placeholder:"Nuevo Nombre de la banda",type:"text",name:"",id:"",value:r,onChange:function(e){return a(e.target.value)}})})]})},u=n(34),O=function(){var e=Object(c.useContext)(j).socket;Object(c.useEffect)((function(){e.on("current-bands",(function(e){console.log(e),t(e)}))}),[e]);var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=document.getElementById("myChart");new u.Chart(t,{type:"horizontalBar",data:{labels:e.map((function(e){return e.name})),datasets:[{label:"# of Votes",data:e.map((function(e){return e.votes})),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{animation:!1,indexAxis:"x",scales:{x:{beginAtZero:!0}}}})};return Object(b.jsx)("div",{children:Object(b.jsx)("canvas",{id:"myChart"})})},h=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useContext)(j).socket;Object(c.useEffect)((function(){a.on("current-bands",(function(e){r(e)}))}),[a,n]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Bandas Actuales"}),Object(b.jsxs)("table",{className:"table table-stripped",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{}),Object(b.jsx)("th",{children:"Nombre"}),Object(b.jsx)("th",{children:"Votos"}),Object(b.jsx)("th",{children:"Borrar"})]})}),Object(b.jsx)("tbody",{children:n.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){return t=e.id,void a.emit("votar-banda",t);var t},children:"+1"})}),Object(b.jsx)("td",{children:Object(b.jsx)("input",{type:"text",className:"form-control",value:e.name,onChange:function(t){return function(e,t){var n=e.target.value;r((function(e){return e.map((function(e){return e.id===t&&(e.name=n),e}))}))}(t,e.id)},onBlur:function(){return t=e.id,n=e.name,void a.emit("cambiar-nombre-banda",{id:t,nombre:n});var t,n}})}),Object(b.jsx)("td",{children:Object(b.jsx)("h4",{children:e.votes})}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){return t=e.id,void a.emit("borrar-banda",t);var t},children:"borrar"})})]},e.id)}))})]})]})};var x=function(){var e=Object(c.useContext)(j).online;return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"alert",children:Object(b.jsxs)("p",{children:["Service Status:",e?Object(b.jsx)("span",{className:"text-success",children:" Online"}):Object(b.jsx)("span",{className:"text-danger",children:"  Offline"})]})}),Object(b.jsx)("h1",{children:"BandNames"}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col col-8",children:[Object(b.jsx)(O,{}),Object(b.jsx)("hr",{})]})}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-8",children:Object(b.jsx)(h,{})}),Object(b.jsx)("div",{className:"col-4",children:Object(b.jsx)(l,{})})]})]})},m=function(){return Object(b.jsx)(d,{children:Object(b.jsx)(x,{})})};a.a.render(Object(b.jsx)(m,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.4b3214e5.chunk.js.map